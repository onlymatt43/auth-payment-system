<!-- Code pour verrouiller une page compl√®te avec Breakdance -->
<script>
window.addEventListener('DOMContentLoaded', function() {
  // V√©rifier si l'utilisateur a d√©j√† valid√© l'acc√®s
  const hasAccess = localStorage.getItem('accessGranted') === 'true';
  const userEmail = localStorage.getItem('userEmail');

  if (!hasAccess || !userEmail) {
    // Rediriger vers la page de validation
    window.location.href = '/validation-acces'; // Remplacez par l'URL de votre page de validation
  } else {
    // V√©rifier p√©riodiquement que l'acc√®s est toujours valide (optionnel)
    setInterval(async function() {
      try {
        const response = await fetch('https://auth-payment-system.onrender.com/api/validate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            email: userEmail,
            token: '000000' // Token factice pour v√©rifier la session
          })
        });
        const data = await response.json();
        if (!data.valid) {
          // Acc√®s expir√©, rediriger
          localStorage.removeItem('accessGranted');
          localStorage.removeItem('userEmail');
          window.location.href = '/validation-acces';
        }
      } catch (error) {
        console.log('Erreur de v√©rification de session');
      }
    }, 300000); // V√©rifier toutes les 5 minutes
  }
});
</script>

<!-- Votre contenu prot√©g√© - visible seulement apr√®s validation -->
<style>
.protected-content {
  opacity: 1;
  transition: opacity 0.3s ease;
}

.loading {
  text-align: center;
  padding: 50px;
  font-size: 18px;
}
</style>

<div class="protected-content">
  <h1>üé• Contenu Exclusif - Acc√®s Premium</h1>

  <!-- Exemple de vid√©o prot√©g√©e -->
  <div style="text-align: center; margin: 20px 0;">
    <video controls style="max-width: 100%; height: auto;">
      <source src="votre-video-exclusif.mp4" type="video/mp4">
      Votre navigateur ne supporte pas la vid√©o.
    </video>
  </div>

  <!-- Autre contenu prot√©g√© -->
  <div style="max-width: 800px; margin: 0 auto; padding: 20px;">
    <h2>Contenu Premium</h2>
    <p>Ce contenu est r√©serv√© aux membres ayant achet√© l'acc√®s via Payhip.</p>

    <!-- Vous pouvez ajouter plus de contenu ici -->
    <div style="background: #f5f5f5; padding: 20px; border-radius: 10px; margin: 20px 0;">
      <h3>üìã Ressources Suppl√©mentaires</h3>
      <ul>
        <li>Guide complet en PDF</li>
        <li>Vid√©os bonus exclusives</li>
        <li>Acc√®s √† la communaut√© priv√©e</li>
      </ul>
    </div>
  </div>
</div>

<!-- Message de chargement au cas o√π -->
<div id="loading-message" class="loading" style="display: none;">
  üîê V√©rification de l'acc√®s en cours...
</div>